{"version":3,"file":"utils.js","names":["getConfig","QueryString","Cookies","VALID_AUTH_PARAMS","getAllPossibleQueryParams","locationURl","arguments","length","undefined","urlParams","parseUrl","query","parse","window","location","search","Object","fromEntries","entries","filter","_ref","key","includes","deleteQueryParams","params","queryParams","url","URL","href","forEach","param","searchParams","delete","history","replaceState","state","setCookie","cookieName","cookieValue","cookieExpiry","cookies","options","domain","SESSION_COOKIE_DOMAIN","path","expires","set","getCountryCookieValue","ONBOARDING_COMPONENT_ENV","get","moveScrollToTop","ref","block","current","scrollIntoView","behavior"],"sources":["../../src/data/utils.js"],"sourcesContent":["// Utility functions\nimport { getConfig } from '@edx/frontend-platform';\nimport QueryString from 'query-string';\nimport Cookies from 'universal-cookie';\n\nimport { VALID_AUTH_PARAMS } from './constants';\n\n/**\n * Parses query parameters from a URL string or the current window's location and\n * filters out parameters that are not in the VALID_AUTH_PARAMS list.\n *\n * @param {string|null} locationURl - Optional. The URL string to parse query parameters from.\n *                                    If not provided, the function uses the current window's location.\n * @returns {Object} An object containing only the valid query parameters.\n */\nconst getAllPossibleQueryParams = (locationURl = null) => {\n  const urlParams = locationURl\n    ? QueryString.parseUrl(locationURl).query\n    : QueryString.parse(window.location.search);\n\n  return Object.fromEntries(\n    Object.entries(urlParams).filter(([key]) => VALID_AUTH_PARAMS.includes(key)),\n  );\n};\n\nexport const deleteQueryParams = (params) => {\n  const queryParams = getAllPossibleQueryParams();\n  const url = new URL(window.location.href);\n\n  params.forEach((param) => {\n    if (queryParams[param]) {\n      url.searchParams.delete(param);\n    }\n  });\n\n  window.history.replaceState(window.history.state, '', url.href);\n};\n\nexport const setCookie = (cookieName, cookieValue, cookieExpiry) => {\n  if (cookieName) { // To avoid setting getting exception when setting cookie with undefined names.\n    const cookies = new Cookies();\n    const options = { domain: getConfig().SESSION_COOKIE_DOMAIN, path: '/' };\n    if (cookieExpiry) {\n      options.expires = cookieExpiry;\n    }\n    cookies.set(cookieName, cookieValue, options);\n  }\n};\n\nexport const getCountryCookieValue = () => {\n  const cookieName = `${getConfig().ONBOARDING_COMPONENT_ENV}-edx-cf-loc`;\n  const cookies = new Cookies();\n  return cookies.get(cookieName);\n};\n\nexport const moveScrollToTop = (ref, block = 'start') => {\n  if (ref?.current?.scrollIntoView) {\n    ref.current.scrollIntoView({ behavior: 'smooth', block });\n  }\n};\n\nexport default getAllPossibleQueryParams;\n"],"mappings":"AAAA;AACA,SAASA,SAAS,QAAQ,wBAAwB;AAClD,OAAOC,WAAW,MAAM,cAAc;AACtC,OAAOC,OAAO,MAAM,kBAAkB;AAEtC,SAASC,iBAAiB,QAAQ,aAAa;;AAE/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,yBAAyB,GAAG,SAAAA,CAAA,EAAwB;EAAA,IAAvBC,WAAW,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,IAAI;EACnD,MAAMG,SAAS,GAAGJ,WAAW,GACzBJ,WAAW,CAACS,QAAQ,CAACL,WAAW,CAAC,CAACM,KAAK,GACvCV,WAAW,CAACW,KAAK,CAACC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC;EAE7C,OAAOC,MAAM,CAACC,WAAW,CACvBD,MAAM,CAACE,OAAO,CAACT,SAAS,CAAC,CAACU,MAAM,CAACC,IAAA;IAAA,IAAC,CAACC,GAAG,CAAC,GAAAD,IAAA;IAAA,OAAKjB,iBAAiB,CAACmB,QAAQ,CAACD,GAAG,CAAC;EAAA,EAC7E,CAAC;AACH,CAAC;AAED,OAAO,MAAME,iBAAiB,GAAIC,MAAM,IAAK;EAC3C,MAAMC,WAAW,GAAGrB,yBAAyB,CAAC,CAAC;EAC/C,MAAMsB,GAAG,GAAG,IAAIC,GAAG,CAACd,MAAM,CAACC,QAAQ,CAACc,IAAI,CAAC;EAEzCJ,MAAM,CAACK,OAAO,CAAEC,KAAK,IAAK;IACxB,IAAIL,WAAW,CAACK,KAAK,CAAC,EAAE;MACtBJ,GAAG,CAACK,YAAY,CAACC,MAAM,CAACF,KAAK,CAAC;IAChC;EACF,CAAC,CAAC;EAEFjB,MAAM,CAACoB,OAAO,CAACC,YAAY,CAACrB,MAAM,CAACoB,OAAO,CAACE,KAAK,EAAE,EAAE,EAAET,GAAG,CAACE,IAAI,CAAC;AACjE,CAAC;AAED,OAAO,MAAMQ,SAAS,GAAGA,CAACC,UAAU,EAAEC,WAAW,EAAEC,YAAY,KAAK;EAClE,IAAIF,UAAU,EAAE;IAAE;IAChB,MAAMG,OAAO,GAAG,IAAItC,OAAO,CAAC,CAAC;IAC7B,MAAMuC,OAAO,GAAG;MAAEC,MAAM,EAAE1C,SAAS,CAAC,CAAC,CAAC2C,qBAAqB;MAAEC,IAAI,EAAE;IAAI,CAAC;IACxE,IAAIL,YAAY,EAAE;MAChBE,OAAO,CAACI,OAAO,GAAGN,YAAY;IAChC;IACAC,OAAO,CAACM,GAAG,CAACT,UAAU,EAAEC,WAAW,EAAEG,OAAO,CAAC;EAC/C;AACF,CAAC;AAED,OAAO,MAAMM,qBAAqB,GAAGA,CAAA,KAAM;EACzC,MAAMV,UAAU,GAAI,GAAErC,SAAS,CAAC,CAAC,CAACgD,wBAAyB,aAAY;EACvE,MAAMR,OAAO,GAAG,IAAItC,OAAO,CAAC,CAAC;EAC7B,OAAOsC,OAAO,CAACS,GAAG,CAACZ,UAAU,CAAC;AAChC,CAAC;AAED,OAAO,MAAMa,eAAe,GAAG,SAAAA,CAACC,GAAG,EAAsB;EAAA,IAApBC,KAAK,GAAA9C,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,OAAO;EAClD,IAAI6C,GAAG,EAAEE,OAAO,EAAEC,cAAc,EAAE;IAChCH,GAAG,CAACE,OAAO,CAACC,cAAc,CAAC;MAAEC,QAAQ,EAAE,QAAQ;MAAEH;IAAM,CAAC,CAAC;EAC3D;AACF,CAAC;AAED,eAAehD,yBAAyB","ignoreList":[]}