{"version":3,"file":"sagas.js","names":["camelCaseObject","logError","logInfo","call","put","takeEvery","loginUser","loginUserFailed","loginUserSuccess","loginRequest","FORBIDDEN_REQUEST","INTERNAL_SERVER_ERROR","handleUserLogin","action","redirectUrl","success","payload","e","statusCodes","response","status","includes","data","errorCode","saga","type"],"sources":["../../../../src/forms/login-popup/data/sagas.js"],"sourcesContent":["import { camelCaseObject } from '@edx/frontend-platform';\nimport { logError, logInfo } from '@edx/frontend-platform/logging';\nimport { call, put, takeEvery } from 'redux-saga/effects';\n\nimport {\n  loginUser, loginUserFailed, loginUserSuccess,\n} from './reducers';\nimport loginRequest from './service';\nimport { FORBIDDEN_REQUEST, INTERNAL_SERVER_ERROR } from '../../../data/constants';\n\n/**\n * Saga function for handling new user login.\n * @param {object} action - The Redux action object containing the payload.\n */\nexport function* handleUserLogin(action) {\n  try {\n    const { redirectUrl, success } = yield call(loginRequest, action.payload);\n\n    yield put(loginUserSuccess({\n      redirectUrl,\n      success,\n    }));\n  } catch (e) {\n    const statusCodes = [400];\n    if (e.response) {\n      const { status } = e.response;\n      if (statusCodes.includes(status)) {\n        yield put(loginUserFailed(camelCaseObject(e.response.data)));\n        logInfo(e);\n      } else if (status === 403) {\n        yield put(loginUserFailed({ errorCode: FORBIDDEN_REQUEST }));\n        logInfo(e);\n      } else {\n        yield put(loginUserFailed({ errorCode: INTERNAL_SERVER_ERROR }));\n        logError(e);\n      }\n    }\n  }\n}\n\n/**\n * Root Saga function that listens for LOGIN actions and calls the handleUserLogin saga.\n */\nexport default function* saga() {\n  yield takeEvery(loginUser.type, handleUserLogin);\n}\n"],"mappings":"AAAA,SAASA,eAAe,QAAQ,wBAAwB;AACxD,SAASC,QAAQ,EAAEC,OAAO,QAAQ,gCAAgC;AAClE,SAASC,IAAI,EAAEC,GAAG,EAAEC,SAAS,QAAQ,oBAAoB;AAEzD,SACEC,SAAS,EAAEC,eAAe,EAAEC,gBAAgB,QACvC,YAAY;AACnB,OAAOC,YAAY,MAAM,WAAW;AACpC,SAASC,iBAAiB,EAAEC,qBAAqB,QAAQ,yBAAyB;;AAElF;AACA;AACA;AACA;AACA,OAAO,UAAUC,eAAeA,CAACC,MAAM,EAAE;EACvC,IAAI;IACF,MAAM;MAAEC,WAAW;MAAEC;IAAQ,CAAC,GAAG,MAAMZ,IAAI,CAACM,YAAY,EAAEI,MAAM,CAACG,OAAO,CAAC;IAEzE,MAAMZ,GAAG,CAACI,gBAAgB,CAAC;MACzBM,WAAW;MACXC;IACF,CAAC,CAAC,CAAC;EACL,CAAC,CAAC,OAAOE,CAAC,EAAE;IACV,MAAMC,WAAW,GAAG,CAAC,GAAG,CAAC;IACzB,IAAID,CAAC,CAACE,QAAQ,EAAE;MACd,MAAM;QAAEC;MAAO,CAAC,GAAGH,CAAC,CAACE,QAAQ;MAC7B,IAAID,WAAW,CAACG,QAAQ,CAACD,MAAM,CAAC,EAAE;QAChC,MAAMhB,GAAG,CAACG,eAAe,CAACP,eAAe,CAACiB,CAAC,CAACE,QAAQ,CAACG,IAAI,CAAC,CAAC,CAAC;QAC5DpB,OAAO,CAACe,CAAC,CAAC;MACZ,CAAC,MAAM,IAAIG,MAAM,KAAK,GAAG,EAAE;QACzB,MAAMhB,GAAG,CAACG,eAAe,CAAC;UAAEgB,SAAS,EAAEb;QAAkB,CAAC,CAAC,CAAC;QAC5DR,OAAO,CAACe,CAAC,CAAC;MACZ,CAAC,MAAM;QACL,MAAMb,GAAG,CAACG,eAAe,CAAC;UAAEgB,SAAS,EAAEZ;QAAsB,CAAC,CAAC,CAAC;QAChEV,QAAQ,CAACgB,CAAC,CAAC;MACb;IACF;EACF;AACF;;AAEA;AACA;AACA;AACA,eAAe,UAAUO,IAAIA,CAAA,EAAG;EAC9B,MAAMnB,SAAS,CAACC,SAAS,CAACmB,IAAI,EAAEb,eAAe,CAAC;AAClD","ignoreList":[]}