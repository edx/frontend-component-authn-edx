{"version":3,"file":"index.js","names":["React","useEffect","useMemo","useRef","useState","getConfig","snakeCaseObject","identifyAuthenticatedUser","AxiosJwtAuthService","configure","configureAuth","getCountryList","getLocale","useIntl","getLoggingService","Container","Form","Icon","StatefulButton","Language","extendedProfileFields","optionalFieldsData","saveUserProfile","messages","setCurrentOpenedForm","COMPLETE_STATE","DEFAULT_STATE","FAILURE_STATE","LOGIN_FORM","PENDING_STATE","useDispatch","useSelector","getCountryCookieValue","moveScrollToTop","trackProgressiveProfilingPageViewed","trackProgressiveProfilingSkipLinkClick","trackProgressiveProfilingSubmitClick","AuthenticatedRedirection","AutoSuggestField","ProgressiveProfilingForm","formatMessage","dispatch","countryFieldRef","countryCookieValue","countryList","submitState","state","progressiveProfiling","subjectsList","redirectUrl","authContextCountryCode","commonData","thirdPartyAuthContext","countryCode","finishAuthUrl","authenticatedUser","register","registrationResult","formData","setFormData","formErrors","setFormErrors","autoFilledCountry","setAutoFilledCountry","value","displayText","skipButtonState","setSkipButtonState","userCountry","find","country","code","name","userId","loggingService","config","hasFormErrors","error","_objectSpread","progressiveProfilingCountryFieldErrorMessage","handleSelect","e","text","target","radioButtonOnChangeHandler","onFieldFocus","onFieldBlur","handleSubmit","preventDefault","eventProperties","isGenderSelected","gender","isLevelOfEducationSelected","levelOfEducation","isWorkExperienceSelected","workExperience","isSubjectSelected","subject","isLearningTypeSelected","learningType","extendedProfile","Object","keys","length","forEach","fieldName","includes","push","fieldValue","payload","username","data","handleSkip","hasCountry","progressiveProfilingCountryFieldBlockingErrorMessage","createElement","size","className","success","isLinkTracked","progressiveProfilingFormHeading","progressiveProfilingCompletionSkipMessage","id","progressiveProfilingCountryFieldTitle","ref","progressiveProfilingCountryFieldInfoMessage","Group","controlId","leadingElement","src","feedBack","progressiveProfilingCountryFieldHelpText","placeholder","useProfileCountryFieldUndetected","options","selectedOption","errorMessage","onChangeHandler","onFocusHandler","onBlurHandler","progressiveProfilingDataCollectionTitle","progressiveProfilingSubjectFieldPlaceholder","label","progressiveProfilingSubjectFieldLabel","progressiveProfilingLevelOfEducationFieldPlaceholder","progressiveProfilingLevelOfEducationFieldLabel","progressiveProfilingWorkExperienceFieldPlaceholder","progressiveProfilingWorkExperienceFieldLabel","progressiveProfilingLearningTypeFieldPlaceholder","progressiveProfilingLearningTypeFieldLabel","Label","progressiveProfilingGenderFieldLabel","RadioSet","onChange","isInline","map","option","Radio","key","type","variant","labels","default","progressiveProfilingSkipForNowButtonText","pending","onClick","onMouseDown","progressiveProfilingSubmitButtonText"],"sources":["../../../src/forms/progressive-profiling-popup/index.jsx"],"sourcesContent":["import React, {\n  useEffect, useMemo, useRef, useState,\n} from 'react';\n\nimport { getConfig, snakeCaseObject } from '@edx/frontend-platform';\nimport { identifyAuthenticatedUser } from '@edx/frontend-platform/analytics';\nimport {\n  AxiosJwtAuthService,\n  configure as configureAuth,\n} from '@edx/frontend-platform/auth';\nimport { getCountryList, getLocale, useIntl } from '@edx/frontend-platform/i18n';\nimport { getLoggingService } from '@edx/frontend-platform/logging';\nimport {\n  Container, Form, Icon, StatefulButton,\n} from '@openedx/paragon';\nimport { Language } from '@openedx/paragon/icons';\n\nimport { extendedProfileFields, optionalFieldsData } from './data/constants';\nimport { saveUserProfile } from './data/reducers';\nimport messages from './messages';\nimport { setCurrentOpenedForm } from '../../authn-component/data/reducers';\nimport {\n  COMPLETE_STATE,\n  DEFAULT_STATE,\n  FAILURE_STATE,\n  LOGIN_FORM,\n  PENDING_STATE,\n} from '../../data/constants';\nimport { useDispatch, useSelector } from '../../data/storeHooks';\nimport { getCountryCookieValue, moveScrollToTop } from '../../data/utils';\nimport {\n  trackProgressiveProfilingPageViewed,\n  trackProgressiveProfilingSkipLinkClick,\n  trackProgressiveProfilingSubmitClick,\n} from '../../tracking/trackers/progressive-profiling';\nimport AuthenticatedRedirection from '../common-components/AuthenticatedRedirection';\nimport AutoSuggestField from '../fields/auto-suggested-field';\n\nimport './index.scss';\n\n/**\n * Progressive profiling form component. This component holds the logic to render optional demographic\n * form fields and infor users about the auto-generated country field.\n *\n * @returns {JSX.Element} Progressive profiling form rendered inside BaseContainer component.\n */\nconst ProgressiveProfilingForm = () => {\n  const { formatMessage } = useIntl();\n  const dispatch = useDispatch();\n\n  const countryFieldRef = useRef(null);\n\n  const countryCookieValue = getCountryCookieValue();\n  const countryList = useMemo(() => getCountryList(getLocale()), []);\n\n  const submitState = useSelector(state => state.progressiveProfiling.submitState);\n  const subjectsList = useSelector(state => state.progressiveProfiling.subjectsList);\n  const redirectUrl = useSelector(state => state.progressiveProfiling.redirectUrl);\n  const authContextCountryCode = useSelector(state => state.commonData.thirdPartyAuthContext.countryCode);\n  const finishAuthUrl = useSelector(state => state.commonData.thirdPartyAuthContext.finishAuthUrl);\n  const authenticatedUser = useSelector(state => state.register.registrationResult.authenticatedUser);\n\n  const [formData, setFormData] = useState({});\n  const [formErrors, setFormErrors] = useState({});\n  const [autoFilledCountry, setAutoFilledCountry] = useState({ value: '', displayText: '' });\n  const [skipButtonState, setSkipButtonState] = useState(DEFAULT_STATE);\n\n  useEffect(() => {\n    let countryCode = null;\n    if (countryCookieValue) {\n      countryCode = countryCookieValue;\n    } else if (authContextCountryCode) {\n      countryCode = authContextCountryCode;\n    }\n\n    if (!countryCode) {\n      return;\n    }\n    const userCountry = countryList.find((country) => country.code === countryCode);\n    if (userCountry?.code !== '' && autoFilledCountry.value === '') {\n      setAutoFilledCountry({ value: userCountry?.code, displayText: userCountry?.name });\n      // set formData state for auto populated country field to pass into payload\n      setFormData({ country: userCountry?.code });\n    }\n  }, [authContextCountryCode, autoFilledCountry, countryCookieValue, countryList, formatMessage]);\n\n  useEffect(() => {\n    if (authenticatedUser === null) {\n      dispatch(setCurrentOpenedForm(LOGIN_FORM));\n    }\n    if (authenticatedUser?.userId) {\n      identifyAuthenticatedUser(authenticatedUser?.userId);\n      configureAuth(AxiosJwtAuthService, { loggingService: getLoggingService(), config: getConfig() });\n      trackProgressiveProfilingPageViewed();\n    }\n  }, [authenticatedUser, dispatch]);\n\n  const hasFormErrors = () => {\n    let error = false;\n    if (!('country' in formData) || (formData?.country === '')) {\n      setFormErrors({ ...formErrors, country: formatMessage(messages.progressiveProfilingCountryFieldErrorMessage) });\n      error = true;\n    }\n    return error;\n  };\n\n  const handleSelect = (e) => {\n    const { name, value, text } = e.target;\n\n    if (text === '') {\n      setFormErrors({ ...formErrors, [name]: formatMessage(messages.progressiveProfilingCountryFieldErrorMessage) });\n    } else if (value) {\n      setFormErrors({ ...formErrors, [name]: '' });\n    }\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const radioButtonOnChangeHandler = (e) => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const onFieldFocus = (e) => {\n    const { name, value } = e.target;\n    setFormErrors({ ...formErrors, [name]: value });\n  };\n\n  const onFieldBlur = (e) => {\n    const { name, value } = e.target;\n\n    if (value === '') {\n      setFormErrors({ ...formErrors, [name]: formatMessage(messages.progressiveProfilingCountryFieldErrorMessage) });\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (hasFormErrors()) {\n      moveScrollToTop(countryFieldRef);\n      return;\n    }\n    const eventProperties = {\n      isGenderSelected: !!formData.gender,\n      isLevelOfEducationSelected: !!formData.levelOfEducation,\n      isWorkExperienceSelected: !!formData.workExperience,\n      isSubjectSelected: !!formData.subject,\n      isLearningTypeSelected: !!formData.learningType,\n    };\n\n    const extendedProfile = [];\n    if (Object.keys(formData).length > 0) {\n      Object.keys(formData).forEach(fieldName => {\n        if (extendedProfileFields.includes(fieldName)) {\n          extendedProfile.push({ fieldName, fieldValue: formData[fieldName] });\n          delete formData[fieldName];\n        }\n      });\n    }\n    const payload = {\n      username: authenticatedUser?.username,\n      data: {\n        extendedProfile,\n        ...formData,\n      },\n    };\n    trackProgressiveProfilingSubmitClick(eventProperties);\n    dispatch(saveUserProfile(snakeCaseObject(payload)));\n  };\n\n  const handleSkip = (e) => {\n    e.preventDefault();\n\n    setSkipButtonState(PENDING_STATE);\n    const hasCountry = !!countryCookieValue || !!authContextCountryCode;\n\n    if (hasFormErrors() && !hasCountry) {\n      setFormErrors({ ...formErrors, country: formatMessage(messages.progressiveProfilingCountryFieldErrorMessage) });\n      setSkipButtonState(FAILURE_STATE);\n      moveScrollToTop(countryFieldRef);\n    } else if (!hasFormErrors() && !hasCountry) {\n      setFormErrors({\n        ...formErrors,\n        country: formatMessage(messages.progressiveProfilingCountryFieldBlockingErrorMessage),\n      });\n      setSkipButtonState(FAILURE_STATE);\n      moveScrollToTop(countryFieldRef);\n    } else if (hasCountry) {\n      // link tracker\n      trackProgressiveProfilingSkipLinkClick(redirectUrl)(e);\n    }\n  };\n\n  return (\n    <Container size=\"lg\" className=\"authn__popup-progressive-profiling-container m-0 overflow-auto\">\n      <AuthenticatedRedirection\n        success={submitState === COMPLETE_STATE}\n        redirectUrl={redirectUrl}\n        finishAuthUrl={finishAuthUrl}\n        isLinkTracked\n      />\n      <h1\n        className=\"display-1 font-italic text-center mb-4\"\n        data-testid=\"progressive-profiling-heading\"\n      >\n        {formatMessage(messages.progressiveProfilingFormHeading)}\n      </h1>\n      <p className=\"text-center\">\n        {formatMessage(messages.progressiveProfilingCompletionSkipMessage)}\n      </p>\n      <hr className=\"heading-separator mb-3 mt-3\" />\n      <Form id=\"progressive-profiling\" name=\"progressive-profiling\">\n        <h3 className=\"mb-2.5 mt-2\">\n          {formatMessage(messages.progressiveProfilingCountryFieldTitle)}\n        </h3>\n        <p\n          className=\"x-small\"\n          ref={countryFieldRef}\n        >\n          {formatMessage(messages.progressiveProfilingCountryFieldInfoMessage)}\n        </p>\n        <Form.Group controlId=\"country\" className=\"mb-4.5\">\n          <AutoSuggestField\n            name=\"country\"\n            leadingElement={<Icon src={Language} />}\n            feedBack={formatMessage(messages.progressiveProfilingCountryFieldHelpText)}\n            placeholder={formatMessage(messages.useProfileCountryFieldUndetected)}\n            options={countryList}\n            selectedOption={autoFilledCountry}\n            errorMessage={formErrors?.country}\n            onChangeHandler={handleSelect}\n            onFocusHandler={onFieldFocus}\n            onBlurHandler={onFieldBlur}\n          />\n        </Form.Group>\n        <h3 className=\"mb-2.5\">\n          {formatMessage(messages.progressiveProfilingDataCollectionTitle)}\n        </h3>\n        <Form.Group controlId=\"subject\" className=\"mb-4\">\n          <AutoSuggestField\n            name=\"subject\"\n            placeholder={formatMessage(messages.progressiveProfilingSubjectFieldPlaceholder)}\n            label={formatMessage(messages.progressiveProfilingSubjectFieldLabel)}\n            options={subjectsList?.options}\n            onChangeHandler={handleSelect}\n          />\n        </Form.Group>\n        <Form.Group controlId=\"levelOfEducation\" className=\"mb-4\">\n          <AutoSuggestField\n            name=\"levelOfEducation\"\n            placeholder={formatMessage(messages.progressiveProfilingLevelOfEducationFieldPlaceholder)}\n            label={formatMessage(messages.progressiveProfilingLevelOfEducationFieldLabel)}\n            options={optionalFieldsData.levelOfEducation.options}\n            onChangeHandler={handleSelect}\n          />\n        </Form.Group>\n        <Form.Group controlId=\"workExperience\" className=\"mb-4\">\n          <AutoSuggestField\n            name=\"workExperience\"\n            placeholder={formatMessage(messages.progressiveProfilingWorkExperienceFieldPlaceholder)}\n            label={formatMessage(messages.progressiveProfilingWorkExperienceFieldLabel)}\n            options={optionalFieldsData.workExperience.options}\n            onChangeHandler={handleSelect}\n          />\n        </Form.Group>\n        <Form.Group controlId=\"learningType\" className=\"mb-4\">\n          <AutoSuggestField\n            name=\"learningType\"\n            placeholder={formatMessage(messages.progressiveProfilingLearningTypeFieldPlaceholder)}\n            label={formatMessage(messages.progressiveProfilingLearningTypeFieldLabel)}\n            options={optionalFieldsData.learningType.options}\n            onChangeHandler={handleSelect}\n          />\n        </Form.Group>\n        <Form.Group controlId=\"gender\" className=\"mb-4\">\n          <Form.Label>\n            {formatMessage(messages.progressiveProfilingGenderFieldLabel)}\n          </Form.Label>\n          <Form.RadioSet\n            value={formData.gender}\n            name=\"gender\"\n            onChange={radioButtonOnChangeHandler}\n            isInline\n          >\n            {optionalFieldsData.gender.options.map(option => (\n              <Form.Radio value={option.label} key={option.label}>\n                {formatMessage(messages[`gender.option.${option.label}`])}\n              </Form.Radio>\n            ))}\n          </Form.RadioSet>\n        </Form.Group>\n        <div className=\"d-flex my-4 justify-content-end progressive-profiling__cta-btn-container\">\n          <StatefulButton\n            id=\"skip-optional-fields\"\n            name=\"skip-optional-fields\"\n            className=\"authn-progressive-profiling-skip-button authn-btn__pill-shaped\"\n            type=\"submit\"\n            variant=\"outline-dark\"\n            state={skipButtonState}\n            labels={{\n              default: formatMessage(messages.progressiveProfilingSkipForNowButtonText),\n              pending: '',\n            }}\n            onClick={handleSkip}\n            onMouseDown={(e) => e.preventDefault()}\n          />\n          <StatefulButton\n            id=\"submit-optional-fields\"\n            name=\"submit-optional-fields\"\n            className=\"authn-progressive-profiling-submit-button authn-btn__pill-shaped\"\n            type=\"submit\"\n            state={submitState}\n            labels={{\n              default: formatMessage(messages.progressiveProfilingSubmitButtonText),\n              pending: '',\n            }}\n            onClick={handleSubmit}\n            onMouseDown={(e) => e.preventDefault()}\n          />\n        </div>\n      </Form>\n    </Container>\n  );\n};\n\nexport default ProgressiveProfilingForm;\n"],"mappings":"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","ignoreList":[]}