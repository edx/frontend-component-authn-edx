{"version":3,"file":"service.js","names":["getConfig","getAuthenticatedHttpClient","QueryString","registerRequest","registrationInformation","requestConfig","headers","isPublic","data","post","LMS_BASE_URL","stringify","catch","e","redirectUrl","redirect_url","success","authenticatedUser","authenticated_user","getFieldsValidations","formPayload","fieldValidations"],"sources":["../../../../src/forms/registration-popup/data/service.js"],"sourcesContent":["import { getConfig } from '@edx/frontend-platform';\nimport { getAuthenticatedHttpClient } from '@edx/frontend-platform/auth';\nimport QueryString from 'query-string';\n\n/**\n * Function for making a registration request to the server.\n * This function sends a POST request to the registration endpoint with the provided registration information.\n * @param {object} registrationInformation - The registration information to be sent to the server.\n * @returns {object} An object containing the redirect URL, success status, and authenticated user details.\n */\nexport default async function registerRequest(registrationInformation) {\n  const requestConfig = {\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n    isPublic: true,\n  };\n\n  const { data } = await getAuthenticatedHttpClient()\n    .post(\n      `${getConfig().LMS_BASE_URL}/api/user/v2/account/registration/`,\n      QueryString.stringify(registrationInformation),\n      requestConfig,\n    )\n    .catch((e) => {\n      throw (e);\n    });\n\n  return {\n    redirectUrl: data.redirect_url || `${getConfig().LMS_BASE_URL}/dashboard`,\n    success: data.success || false,\n    authenticatedUser: data.authenticated_user,\n  };\n}\n\nexport async function getFieldsValidations(formPayload) {\n  const requestConfig = {\n    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n    isPublic: true,\n  };\n\n  const { data } = await getAuthenticatedHttpClient()\n    .post(\n      `${getConfig().LMS_BASE_URL}/api/user/v1/validation/registration`,\n      QueryString.stringify(formPayload),\n      requestConfig,\n    )\n    .catch((e) => {\n      throw (e);\n    });\n\n  return {\n    fieldValidations: data,\n  };\n}\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,wBAAwB;AAClD,SAASC,0BAA0B,QAAQ,6BAA6B;AACxE,OAAOC,WAAW,MAAM,cAAc;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,eAAeC,eAAeA,CAACC,uBAAuB,EAAE;EACrE,MAAMC,aAAa,GAAG;IACpBC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAoC,CAAC;IAChEC,QAAQ,EAAE;EACZ,CAAC;EAED,MAAM;IAAEC;EAAK,CAAC,GAAG,MAAMP,0BAA0B,CAAC,CAAC,CAChDQ,IAAI,CACF,GAAET,SAAS,CAAC,CAAC,CAACU,YAAa,oCAAmC,EAC/DR,WAAW,CAACS,SAAS,CAACP,uBAAuB,CAAC,EAC9CC,aACF,CAAC,CACAO,KAAK,CAAEC,CAAC,IAAK;IACZ,MAAOA,CAAC;EACV,CAAC,CAAC;EAEJ,OAAO;IACLC,WAAW,EAAEN,IAAI,CAACO,YAAY,IAAK,GAAEf,SAAS,CAAC,CAAC,CAACU,YAAa,YAAW;IACzEM,OAAO,EAAER,IAAI,CAACQ,OAAO,IAAI,KAAK;IAC9BC,iBAAiB,EAAET,IAAI,CAACU;EAC1B,CAAC;AACH;AAEA,OAAO,eAAeC,oBAAoBA,CAACC,WAAW,EAAE;EACtD,MAAMf,aAAa,GAAG;IACpBC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAoC,CAAC;IAChEC,QAAQ,EAAE;EACZ,CAAC;EAED,MAAM;IAAEC;EAAK,CAAC,GAAG,MAAMP,0BAA0B,CAAC,CAAC,CAChDQ,IAAI,CACF,GAAET,SAAS,CAAC,CAAC,CAACU,YAAa,sCAAqC,EACjER,WAAW,CAACS,SAAS,CAACS,WAAW,CAAC,EAClCf,aACF,CAAC,CACAO,KAAK,CAAEC,CAAC,IAAK;IACZ,MAAOA,CAAC;EACV,CAAC,CAAC;EAEJ,OAAO;IACLQ,gBAAgB,EAAEb;EACpB,CAAC;AACH","ignoreList":[]}